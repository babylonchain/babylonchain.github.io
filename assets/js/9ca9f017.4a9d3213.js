"use strict";(self.webpackChunkdocument_sample=self.webpackChunkdocument_sample||[]).push([[7176],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>p});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},h=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),u=c(n),p=o,m=u["".concat(s,".").concat(p)]||u[p]||d[p]||a;return n?i.createElement(m,r(r({ref:t},h),{},{components:n})):i.createElement(m,r({ref:t},h))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var c=2;c<a;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},30526:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var i=n(87462),o=(n(67294),n(3905));const a={id:"architecture",sidebar_label:"Architecture",hide_table_of_contents:!0},r="Babylon Architecture",l={unversionedId:"introduction/architecture",id:"introduction/architecture",title:"Babylon Architecture",description:"The Babylon system is composed of a Babylon node",source:"@site/docs/introduction/architecture.md",sourceDirName:"introduction",slug:"/introduction/architecture",permalink:"/docs/introduction/architecture",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/introduction/architecture.md",tags:[],version:"current",frontMatter:{id:"architecture",sidebar_label:"Architecture",hide_table_of_contents:!0},sidebar:"docs",previous:{title:"Bitcoin Staking",permalink:"/docs/introduction/btc-staking"},next:{title:"User Guides",permalink:"/docs/user-guides/overview"}},s={},c=[{value:"Babylon Node Modules",id:"babylon-node-modules",level:2},{value:"Epoching",id:"epoching",level:3},{value:"BTC Light Client",id:"btc-light-client",level:3},{value:"BTC Checkpoint",id:"btc-checkpoint",level:3},{value:"Checkpointing",id:"checkpointing",level:3},{value:"ZoneConcierge",id:"zoneconcierge",level:3},{value:"BTC Staking",id:"btc-staking",level:3},{value:"Finality",id:"finality",level:3},{value:"Incentive",id:"incentive",level:3},{value:"Vigilantes",id:"vigilantes",level:2},{value:"Vigilante Submitter",id:"vigilante-submitter",level:3},{value:"Vigilante Reporter",id:"vigilante-reporter",level:3},{value:"Monitors",id:"monitors",level:2},{value:"Checkpointing Monitor",id:"checkpointing-monitor",level:3},{value:"BTC Staking Monitor",id:"btc-staking-monitor",level:3},{value:"BTC Staking Programs",id:"btc-staking-programs",level:2},{value:"BTC Staker",id:"btc-staker",level:3},{value:"Finality Provider",id:"finality-provider",level:3},{value:"Covenant Emulator",id:"covenant-emulator",level:3},{value:"Consumer Zones",id:"consumer-zones",level:2},{value:"IBC Relayer",id:"ibc-relayer",level:3},{value:"Babylon Contract",id:"babylon-contract",level:3}],h={toc:c};function d(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,i.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"babylon-architecture"},"Babylon Architecture"),(0,o.kt)("p",null,"The Babylon system is composed of a Babylon node\nbuilt using the Cosmos SDK as well as peripheral programs\nthat facilitate BTC staking, finality round participation, and\ncommunication with Bitcoin and other Consumer Zones.\n",(0,o.kt)("img",{alt:"Babylon Architecture",src:n(43358).Z,width:"3494",height:"2897"})),(0,o.kt)("h2",{id:"babylon-node-modules"},"Babylon Node Modules"),(0,o.kt)("h3",{id:"epoching"},(0,o.kt)("a",{parentName:"h3",href:"../developer-guides/modules/epoching"},"Epoching")),(0,o.kt)("p",null,"The Babylon blockchain is divided into epochs\nthat consist of a parameterized number of blocks.\nWithin each epoch, the validator set does not change.\nThis way, Babylon needs a checkpoint per epoch rather than per block,\nwhich reduces the checkpointing costs.\nThe epoching module achieves this by delaying the execution\nof transactions that affect the validator set to the last block\nof each epoch."),(0,o.kt)("h3",{id:"btc-light-client"},(0,o.kt)("a",{parentName:"h3",href:"../developer-guides/modules/btclightclient"},"BTC Light Client")),(0,o.kt)("p",null,"The BTC Light Client module receives Bitcoin headers\nreported by the Vigilante Reporter and\nmaintains a BTC header chain based on the PoW rules of Bitcoin.\nIt exposes information about the canonical Bitcoin chain,\nthe depth of headers, and\nwhether the inclusion evidence for a Bitcoin transaction is valid."),(0,o.kt)("h3",{id:"btc-checkpoint"},(0,o.kt)("a",{parentName:"h3",href:"../developer-guides/modules/btccheckpoint"},"BTC Checkpoint")),(0,o.kt)("p",null,"The BTC Checkpoint module verifies Babylon\u2019s BTC checkpoints\nreported by the Vigilante Reporter, and\nprovides the confirmation status of these checkpoints to the Checkpointing\nmodule based on their depth according to the BTC Light Client module."),(0,o.kt)("h3",{id:"checkpointing"},(0,o.kt)("a",{parentName:"h3",href:"../developer-guides/modules/checkpointing"},"Checkpointing")),(0,o.kt)("p",null,"The checkpointing module is responsible for creating Babylon checkpoints\nto be submitted to Bitcoin and maintaining their confirmation status.\nIt collects the validator's\n",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/BLS_digital_signature"},"BLS signatures"),"\nfor each block to be checkpointed and aggregates them\ninto a BLS multisignature to include in the Bitcoin checkpoint.\nThe confirmation status of each checkpoint is determined by\nBitcoin checkpoint inclusion information retrieved from the\nBTC checkpoint module."),(0,o.kt)("h3",{id:"zoneconcierge"},(0,o.kt)("a",{parentName:"h3",href:"../developer-guides/modules/zoneconcierge"},"ZoneConcierge")),(0,o.kt)("p",null,"The Zone Concierge module\nextracts verified Consumer Zone headers from\nconnected ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cosmos/ibc-go"},"IBC light clients")," and\nmaintains their Bitcoin confirmation status based on the\nBitcoin confirmation status of the\nBabylon transactions that carry them.\nIt communicates the Bitcoin confirmation status to the Consumer Zone\nusing verifiable proofs through an\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cosmos/ibc-go"},"IBC")," connection."),(0,o.kt)("h3",{id:"btc-staking"},"BTC Staking"),(0,o.kt)("p",null,"The BTC Staking module\nis the bookkeeper for the BTC staking protocol.\nIt is responsible for verifying and activating\nBTC staking requests and\nmaintaining the active finality provider set.\nIt communicates with the BTC Light Client module\nto extract the confirmation status of staking requests and\nreceives notifications about on-demand unlocked stake from the\nBTC Staking Monitor."),(0,o.kt)("h3",{id:"finality"},"Finality"),(0,o.kt)("p",null,"The Finality module is responsible for finalizing blocks\nproduced by the CometBFT consensus.\nIt receives and verifies finality round votes\nfrom finality providers and\na block is considered finalized if sufficient\nvoting power is cast on it.\nThe voting power of each finality provider is based on\nits Bitcoin stake retrieved from the BTC Staking module.\nFinality votes are performed using\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.babylonchain.io/assets/files/btc_staking_litepaper-32bfea0c243773f0bfac63e148387aef.pdf"},"Extractable-One-Time-Signatures (EOTS)"),"\nand verified using\nthe finality providers' committed public randomness."),(0,o.kt)("h3",{id:"incentive"},"Incentive"),(0,o.kt)("p",null,"The incentive module consumes a percentage\nof the rewards intended for Babylon stakers and\ndistributes it as rewards to Bitcoin stakers and\nvigilantes."),(0,o.kt)("h2",{id:"vigilantes"},"Vigilantes"),(0,o.kt)("p",null,"The vigilante suite of programs acts as a\nrelayer of data between Babylon and Bitcoin.\nBabylon's secure operation requires\nthat at least one honest\noperator of each of the programs exist.\nOtherwise,\nan alarm will be raised by the monitor program."),(0,o.kt)("h3",{id:"vigilante-submitter"},(0,o.kt)("a",{parentName:"h3",href:"../developer-guides/modules/submitter"},"Vigilante Submitter")),(0,o.kt)("p",null,"A standalone program that submits\nBabylon checkpoints to Bitcoin as\nBitcoin transactions embedding data\nutilising the ",(0,o.kt)("inlineCode",{parentName:"p"},"OP_RETURN")," Bitcoin script code."),(0,o.kt)("h3",{id:"vigilante-reporter"},(0,o.kt)("a",{parentName:"h3",href:"../developer-guides/modules/reporter"},"Vigilante Reporter")),(0,o.kt)("p",null,"A standalone program that scans\nthe Bitcoin ledger for Bitcoin headers and Babylon checkpoints,\nand reports them back to Babylon using Babylon transactions."),(0,o.kt)("h2",{id:"monitors"},"Monitors"),(0,o.kt)("p",null,"The monitor programs suite is responsible for\nmonitoring the consistency between Babylon's state and\nBitcoin."),(0,o.kt)("h3",{id:"checkpointing-monitor"},(0,o.kt)("a",{parentName:"h3",href:"../developer-guides/modules/monitor"},"Checkpointing Monitor")),(0,o.kt)("p",null,"A standalone program that monitors:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The consistency between the Bitcoin canonical chain and\nthe Bitcoin header chain maintained by\nBabylon's BTC Light client module."),(0,o.kt)("li",{parentName:"ul"},"The timely inclusion of Babylon's Bitcoin checkpoints\ninformation in the Babylon ledger.")),(0,o.kt)("h3",{id:"btc-staking-monitor"},(0,o.kt)("a",{parentName:"h3",href:"https://github.com/babylonchain/vigilante"},"BTC Staking Monitor")),(0,o.kt)("p",null,"A standalone program that monitors:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The execution of BTC Staking on-demand unbonding transactions\non the Bitcoin ledger to inform Babylon about them."),(0,o.kt)("li",{parentName:"ul"},"The execution of BTC Staking slashing transactions in the case\nof a finality provider double voting.\nIn the case of non-execution the monitor extracts the finality provider's\nprivate key and executes the slashing."),(0,o.kt)("li",{parentName:"ul"},"The execution of a selective slashing attack launched\nby a finality provider. In this case,\nthe monitor extracts the finality provider's private key\nand slashes them.")),(0,o.kt)("h2",{id:"btc-staking-programs"},"BTC Staking Programs"),(0,o.kt)("p",null,"The BTC Staking programs suite\ninvolves components that enable the function\nBitcoin Stakers and Finality Providers\nwhile also ensuring their adherence to the protocol."),(0,o.kt)("h3",{id:"btc-staker"},"BTC Staker"),(0,o.kt)("p",null,"Bitcoin holders can stake their Bitcoin\nby creating a set of Bitcoin transactions,\nincluding them to the Bitcoin ledger, and\nthen informing Babylon about their staking.\nLater, they can also on-demand unlock or\nwithdraw their funds when their stake expires.\nThe following set of standalone programs\nhas been developed to enable these functionalities:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/babylonchain/btc-staker"},"BTC Staker Daemon"),":\nDaemon program connecting to a Bitcoin wallet and Babylon."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/babylonchain/btc-staking-dashboard"},"BTC Staker Dashboard"),":\nWeb application connecting to a Bitcoin wallet extension and the Babylon API.\nShould only be used for testing purposes."),(0,o.kt)("li",{parentName:"ul"},"Wallet Integrations (TBD)")),(0,o.kt)("h3",{id:"finality-provider"},(0,o.kt)("a",{parentName:"h3",href:"https://github.com/babylonchain/finality-provider"},"Finality Provider")),(0,o.kt)("p",null,"A standalone program that allows for the registration and\nmaintenance of a finality provider.\nIt monitors for a finality provider's inclusion in the active set, commits\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.babylonchain.io/assets/files/btc_staking_litepaper-32bfea0c243773f0bfac63e148387aef.pdf"},"Extractable One Time Signature (EOTS)"),"\npublic randomness, and\nsubmits finality votes for blocks.\nFinality votes are created through a connection to a standalone\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/babylonchain/finality-provider"},"EOTS manager daemon"),"\nresponsible for securely maintaining the\nfinality provider's private keys."),(0,o.kt)("h3",{id:"covenant-emulator"},(0,o.kt)("a",{parentName:"h3",href:"https://github.com/babylonchain/covenant-emulator"},"Covenant Emulator")),(0,o.kt)("p",null,"A standalone program utilised by the covenant emulation committee members.\nIt emulates ",(0,o.kt)("a",{parentName:"p",href:"https://covenants.info"},"covenant")," functionality by monitoring\nfor pending staking requests,\nverifying their contents, and\nsubmitting necessary signatures."),(0,o.kt)("h2",{id:"consumer-zones"},"Consumer Zones"),(0,o.kt)("h3",{id:"ibc-relayer"},"IBC Relayer"),(0,o.kt)("p",null,"The IBC Relayer maintains the\n",(0,o.kt)("a",{parentName:"p",href:"https://cosmos.network/ibc/"},"IBC protocol")," connection\nbetween Babylon and other Consumer Zones (CZs).\nIt is responsible for updating the CZ's light client\ninside the Babylon ledger to enable checkpointing and\npropagating checkpoint information to the Babylon smart contract\ndeployed within the CZ."),(0,o.kt)("p",null,"There are different IBC relayer implementations that can achieve\nthis function. Most notably:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/cosmos/relayer"},"Cosmos Relayer"),":\nA fully functional relayer written in Go."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/babylonchain/babylon-relayer/"},"Babylon Relayer"),":\nA wrapper of the Cosmos Relayer that can maintain a one-way IBC connection.\nIt is recommended to be used when the Consumer Zone does not deploy the\nBabylon smart contract."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/informalsystems/hermes"},"Hermes Relayer"),":\nA fully functional relayer written in Rust.")),(0,o.kt)("h3",{id:"babylon-contract"},(0,o.kt)("a",{parentName:"h3",href:"https://github.com/babylonchain/babylon-contract"},"Babylon Contract")),(0,o.kt)("p",null,"A ",(0,o.kt)("a",{parentName:"p",href:"https://cosmwasm.com/"},"CosmWasm")," smart contract intended for\ndeployment in a Consumer Zone.\nIt enables Bitcoin Checkpointing functionality without introducing\ninvasive changes in the codebase of the Consumer Zone.\nBased on the Bitcoin Checkpointing functionality,\nthe Consumer Zone can make decisions based on the inclusion\nof its checkpoints in the Bitcoin ledger\n(e.g. execute BTC-assisted unbonding requests)."))}d.isMDXComponent=!0},43358:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/arch-22e59a792ec45217a5f121dfe7d3f701.png"}}]);